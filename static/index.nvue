<template>
	<view>
		<view>
			<view style="
            position: fixed;
            z-index: 1;
            bottom: 40px;
            right: 0;">
			<image @click="testlist" src="../../static/location.png" style="width: 40px;height: 40px;"></image>
			
				<image @click="test" src="../../static/location.png" style="width: 40px;height: 40px;"></image>
				<image @click="location" src="../../static/location.png" style="width: 40px;height: 40px;"></image>
			</view>
		</view>
		<map id="map" ref="map" :style="'width: ' + width + '; height: ' + height + ';'" :scale="map.scale" @regionchange="regionchange"
		 @updated="updated" :latitude="map.latitude" :longitude="map.longitude" :markers="covers" @callouttap="de" @markertap="de">


		</map>
	</view>
</template>

<script>
	// import zjMarker()
	var map;
	export default {
		data() {
			return {
				height: '500px',
				width: '500px',
				map: {
					scale: 13,
					latitude: 39.909,
					longitude: 116.39742
				},
				covers: [{
					latitude: 39.909,
					longitude: 116.39742
				}],
				list: [{
					"id": 1264640,
					"user_id": 335187,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "2020å¹´åªå‰©2ä¸ªæœˆäº†ï¼Œæ— è®ºä½ ä»Šå¹´ç»å†äº†ä»€ä¹ˆï¼Œé‚£éƒ½å·²æˆè¿‡å¾€ï¼Œå¸Œæœ›ä»Šå¹´çš„é—æ†¾ï¼Œéƒ½æ˜¯æ˜å¹´æƒŠå–œçš„é“ºå«ï¼ŒåŠ æ²¹åŠ æ²¹ï¼",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53616924,
					"latitude": "27.267520",
					"longitude": "111.727120",
					"createtime": 1604206554,
					"updatetime": 1604208624,
					"deletetime": null,
					"status": "normal",
					"nickname": "Gentlema",
					"avatar": "https://image.aishencn.com/2020/10/20/002207441_40845724-user.jpg",
					"bio": "",
					"distance": 13419,
					"images_arr": [""]
				}, {
					"id": 1272720,
					"user_id": 36950,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 2,
					"reviews": 0,
					"shares": 0,
					"text": "è€¶æ–¯ è«æ‹‰",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53626331,
					"latitude": "27.257640",
					"longitude": "111.747910",
					"createtime": 1604251112,
					"updatetime": 1604251277,
					"deletetime": null,
					"status": "normal",
					"nickname": "å¦–ä»™.",
					"avatar": "https://image.aishencn.com/2020/04/09/004135379_37869100-user.jpg",
					"bio": "",
					"distance": 27070,
					"images_arr": [""]
				}, {
					"id": 1316740,
					"user_id": 366172,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "ç”Ÿæ´»ä¸æ˜“ä¸¶ä¸”è¡Œä¸”çæƒœ",
					"images": "https://image.aishencn.com/2020/11/04/215134979_98197351-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53655712,
					"latitude": "27.257430",
					"longitude": "111.732960",
					"createtime": 1604497896,
					"updatetime": 1604502723,
					"deletetime": null,
					"status": "normal",
					"nickname": "è¿‡å¾€",
					"avatar": "https://image.aishencn.com/2020/11/04/182622730_98197351-user.venus/cache/ext/crop/1604518314542_jpg",
					"bio": "",
					"distance": 27190,
					"images_arr": ["https://image.aishencn.com/2020/11/04/215134979_98197351-bbs.jpg"]
				}, {
					"id": 1322662,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 5,
					"reviews": 0,
					"shares": 0,
					"text": "â€œæ²¡æœ‰é‡è§ä½ ä¹‹å‰ï¼Œæˆ‘è§‰å¾—äººç”Ÿäº¦ä¸è¿‡å¦‚æ­¤",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53659496,
					"latitude": "27.271350",
					"longitude": "111.804710",
					"createtime": 1604525804,
					"updatetime": 1604536039,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 27950,
					"images_arr": [""]
				}, {
					"id": 1323519,
					"user_id": 102623,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 4,
					"reviews": 0,
					"shares": 0,
					"text": "å§‘å‡‰é˜¿  æ“¦å¹²çœ¼æ³ª\nçˆ±ä½ çš„äººä¸ä¼šè®©ä½ æ»¡é¢æ³ªæ°´\nä»–åœ¨åˆ«äººçš„æ€€é‡Œæ²‰é†‰\nä½ åˆä½•å¿…ç‹¬è‡ªè§’è½ä¼¤æ‚²",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53660361,
					"latitude": "27.278180",
					"longitude": "111.735640",
					"createtime": 1604540131,
					"updatetime": 1604541088,
					"deletetime": null,
					"status": "normal",
					"nickname": "TZ",
					"avatar": "https://image.aishencn.com/2020/04/13/113855467_63398803-user.jpg",
					"bio": "",
					"distance": 29174,
					"images_arr": [""]
				}, {
					"id": 1330305,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 7,
					"reviews": 0,
					"shares": 0,
					"text": "å…¬ä¸»åœ¨åŸå ¡ä¸‹æ·‹äº†ä¸€æ™šä¸Šçš„é›¨ ç‹å­ä¹Ÿæ²¡æœ‰æ¥ ä½†éª‘å£«ä¸€ç›´éƒ½åœ¨ æˆ‘çš„æ„æ€æ˜¯ä½ å¯ä»¥å¯»æ‰¾é‚£ä¸ªæ›´å€¼å¾—è®©ä½ å¥”èµ´çš„é‚£ä¸ªäºº",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53664210,
					"latitude": "27.271440",
					"longitude": "111.804850",
					"createtime": 1604573707,
					"updatetime": 1604581746,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 30799,
					"images_arr": [""]
				}, {
					"id": 1330481,
					"user_id": 366172,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 0,
					"reviews": 0,
					"shares": 0,
					"text": "ä¸€ç›´åœ¨è·¯ä¸Šï¼Œä¸ä¸ºæ—…è¡Œï¼Œåªä¸ºåœ¨æœªçŸ¥çš„é€”ä¸­é‡è§æ›´å¥½çš„æˆ‘ä»¬",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53664285,
					"latitude": "27.280920",
					"longitude": "111.737570",
					"createtime": 1604574204,
					"updatetime": 1604582480,
					"deletetime": null,
					"status": "normal",
					"nickname": "è¿‡å¾€",
					"avatar": "https://image.aishencn.com/2020/11/04/182622730_98197351-user.venus/cache/ext/crop/1604518314542_jpg",
					"bio": "",
					"distance": 63838,
					"images_arr": [""]
				}, {
					"id": 1330710,
					"user_id": 372568,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 3,
					"reviews": 0,
					"shares": 0,
					"text": "ä»æ­¤æˆ‘çš„ä¸–ç•Œå°†å˜å¾—æ¨¡ç³Š",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53663782,
					"latitude": "27.254010",
					"longitude": "111.747450",
					"createtime": 1604570320,
					"updatetime": 1604583739,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ˜Ÿæ˜Ÿè‡ªè¿°æ›²",
					"avatar": "https://image.aishencn.com/2020/10/30/053708194_91142779-user.jpg",
					"bio": "",
					"distance": 82756,
					"images_arr": [""]
				}, {
					"id": 1331608,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 3,
					"reviews": 0,
					"shares": 0,
					"text": "â€œå¸Œæœ›ä»¥åå–œæ¬¢çš„äººï¼Œä¸è¦è®©æˆ‘å“­ï¼Œä¸è¦è®©æˆ‘å—å§”å±ˆï¼Œä¸è¦ä¸ç†æˆ‘ï¼Œæ›´ä¸è¦æ”¾å¼ƒæˆ‘ï¼‚",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53665113,
					"latitude": "27.271460",
					"longitude": "111.804690",
					"createtime": 1604579672,
					"updatetime": 1604588770,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 87636,
					"images_arr": [""]
				}, {
					"id": 1335017,
					"user_id": 374069,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "éšæœºæŠ½å–é€äº†å§\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né€æˆ‘",
					"images": "https://image.aishencn.com/2020/11/06/015538056_36084241-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53669093,
					"latitude": "27.264500",
					"longitude": "111.753810",
					"createtime": 1604598940,
					"updatetime": 1604608038,
					"deletetime": null,
					"status": "normal",
					"nickname": "ä¸œä¸œ",
					"avatar": "https://image.aishencn.com/2020/02/27/121802570_36084241-user.jpg",
					"bio": "",
					"distance": 97973,
					"images_arr": ["https://image.aishencn.com/2020/11/06/015538056_36084241-bbs.jpg"]
				}, {
					"id": 1336305,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 0,
					"reviews": 0,
					"shares": 0,
					"text": "æˆ‘åªæƒ³å‡¤å† éœå¸”ï¼Œå«æ„ä¸­äººï¼ŒæƒŸæ„¿æ‰§å­ä¹‹æ‰‹ï¼Œä¸å­å•è€ã€‚ç´ç‘Ÿåœ¨å¾¡ï¼Œè«ä¸é™å¥½ã€‚è¿™æ˜¯æˆ‘å‘å¾€çš„...",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53669841,
					"latitude": "27.271410",
					"longitude": "111.804750",
					"createtime": 1604613789,
					"updatetime": 1604615952,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 133324,
					"images_arr": [""]
				}, {
					"id": 1353385,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 0,
					"reviews": 0,
					"shares": 0,
					"text": "äºŒé€‰ä¸€çš„æ—¶å€™è®°å¾—æ”¾å¼ƒæˆ‘ å› ä¸ºæˆ‘ä¸æƒ³æˆä¸ºåˆ«äººçš„ç¬¬äºŒé€‰æ‹© å•é€‰çš„æ—¶å€™ä¹Ÿè¦è®°å¾—æ”¾å¼ƒæˆ‘ æˆ‘ä¸æƒ³æˆä¸ºä½ è¿«ä¸å¾—å·²çš„é€‰é¡¹ æˆ‘åªæƒ³æˆä¸ºä½ çš„åçˆ±å’Œä¾‹å¤–",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53682432,
					"latitude": "27.271610",
					"longitude": "111.804870",
					"createtime": 1604710321,
					"updatetime": 1604712076,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 138400,
					"images_arr": [""]
				}, {
					"id": 1373304,
					"user_id": 274507,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 8,
					"reviews": 0,
					"shares": 0,
					"text": "ç¥æˆ‘ä»¬å¥½åœ¨ç§‹å¤©",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53700465,
					"latitude": "27.234460",
					"longitude": "111.790840",
					"createtime": 1604816918,
					"updatetime": 1604822237,
					"deletetime": null,
					"status": "normal",
					"nickname": "èŒ",
					"avatar": "https://image.aishencn.com/2020/05/07/100612550_58573312-user.jpg",
					"bio": "",
					"distance": 140463,
					"images_arr": [""]
				}, {
					"id": 1391504,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 0,
					"reviews": 0,
					"shares": 0,
					"text": "å¥³å­©å­å˜›ï¼Œä½ è¶Šæ‡‚å¥¹ï¼Œå¥¹è¶Šç¦»ä¸å¼€ä½ ï¼Œä½ å¯¹å¥¹å¥½ï¼Œå¥¹å¿ƒé‡Œæ˜ç™½ï¼Œå“ªæ€•ä½ å’Œå¥¹ä½å‡ºç§Ÿå±‹åƒæ³¡é¢å¥¹ä¹Ÿå¿ƒç”˜æƒ…æ„¿ã€‚",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53714785,
					"latitude": "27.271390",
					"longitude": "111.804810",
					"createtime": 1604918966,
					"updatetime": 1604922689,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 142439,
					"images_arr": [""]
				}, {
					"id": 1398488,
					"user_id": 368782,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 0,
					"reviews": 0,
					"shares": 0,
					"text": "çœŸè¯š  æ¸©æŸ”  è€å¿ƒ  é™ªä¼´ï¼Œæ˜¯æˆ‘æœ€å–œæ¬¢çš„å››ä¸ªè¯",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53720931,
					"latitude": "27.271100",
					"longitude": "111.804780",
					"createtime": 1604960500,
					"updatetime": 1604960841,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•‘èµ.",
					"avatar": "https://image.aishencn.com/2020/11/04/220729994_98895418-user.jpg",
					"bio": "",
					"distance": 153462,
					"images_arr": [""]
				}, {
					"id": 1406721,
					"user_id": 402917,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 2,
					"reviews": 0,
					"shares": 0,
					"text": "æˆ‘æƒ³è¿‡å¤å¤©",
					"images": "https://image.aishencn.com/2020/11/10/193212863_98858587-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53726111,
					"latitude": "27.232600",
					"longitude": "111.796070",
					"createtime": 1605007935,
					"updatetime": 1605008899,
					"deletetime": null,
					"status": "normal",
					"nickname": "é»é»",
					"avatar": "https://image.aishencn.com/2020/11/10/184249621_98858587-user.venus/cache/ext/crop/1605037921877_jpg",
					"bio": "",
					"distance": 324077,
					"images_arr": ["https://image.aishencn.com/2020/11/10/193212863_98858587-bbs.jpg"]
				}, {
					"id": 1407950,
					"user_id": 372568,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 9,
					"reviews": 0,
					"shares": 0,
					"text": "ğŸå¾ˆç”œå“¦ï¼",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53725499,
					"latitude": "27.254530",
					"longitude": "111.747870",
					"createtime": 1605003930,
					"updatetime": 1605015918,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ˜Ÿæ˜Ÿè‡ªè¿°æ›²",
					"avatar": "https://image.aishencn.com/2020/10/30/053708194_91142779-user.jpg",
					"bio": "",
					"distance": 359099,
					"images_arr": [""]
				}, {
					"id": 1408491,
					"user_id": 402917,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 6,
					"reviews": 0,
					"shares": 0,
					"text": "æ™šå®‰å•¦  å„ä½äº²",
					"images": "https://image.aishencn.com/2020/11/10/211754256_98858587-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53727321,
					"latitude": "27.231580",
					"longitude": "111.797950",
					"createtime": 1605014278,
					"updatetime": 1605018791,
					"deletetime": null,
					"status": "normal",
					"nickname": "é»é»",
					"avatar": "https://image.aishencn.com/2020/11/10/184249621_98858587-user.venus/cache/ext/crop/1605037921877_jpg",
					"bio": "",
					"distance": 372723,
					"images_arr": ["https://image.aishencn.com/2020/11/10/211754256_98858587-bbs.jpg"]
				}, {
					"id": 1413734,
					"user_id": 402917,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 0,
					"reviews": 0,
					"shares": 0,
					"text": "ç¾å¥½çš„ä¸€å¤©å¼€å§‹å•¦ã€‚",
					"images": "https://image.aishencn.com/2020/11/11/062138234_98858587-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53731777,
					"latitude": "27.231570",
					"longitude": "111.797990",
					"createtime": 1605046900,
					"updatetime": 1605047222,
					"deletetime": null,
					"status": "normal",
					"nickname": "é»é»",
					"avatar": "https://image.aishencn.com/2020/11/10/184249621_98858587-user.venus/cache/ext/crop/1605037921877_jpg",
					"bio": "",
					"distance": 372865,
					"images_arr": ["https://image.aishencn.com/2020/11/11/062138234_98858587-bbs.jpg"]
				}, {
					"id": 1424429,
					"user_id": 402917,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³å¸‚",
					"views": 0,
					"likes": 4,
					"reviews": 0,
					"shares": 0,
					"text": "å–œæ¬¢å¤å¤©çš„å¥³å­©ğŸ‘§ğŸ¿",
					"images": "https://image.aishencn.com/2020/11/11/195747214_98858587-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53737407,
					"latitude": "27.231570",
					"longitude": "111.797970",
					"createtime": 1605095869,
					"updatetime": 1605107903,
					"deletetime": null,
					"status": "normal",
					"nickname": "é»é»",
					"avatar": "https://image.aishencn.com/2020/11/10/184249621_98858587-user.venus/cache/ext/crop/1605037921877_jpg",
					"bio": "",
					"distance": 372978,
					"images_arr": ["https://image.aishencn.com/2020/11/11/195747214_98858587-bbs.jpg"]
				}, {
					"id": 1449019,
					"user_id": 416790,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 3,
					"reviews": 0,
					"shares": 0,
					"text": "æ²¡äººå–œæ¬¢å‘—",
					"images": "https://image.aishencn.com/2020/11/13/132837448_77242729-bbs.venus/cache/-1636427911/pub/202011/1605245317221_jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53756433,
					"latitude": "27.324050",
					"longitude": "111.767780",
					"createtime": 1605245318,
					"updatetime": 1605246666,
					"deletetime": null,
					"status": "normal",
					"nickname": "å¤šå¤šç›Šå–„",
					"avatar": "https://image.aishencn.com/2020/02/27/183118049_77242729-user.jpg",
					"bio": "",
					"distance": 383642,
					"images_arr": [
						"https://image.aishencn.com/2020/11/13/132837448_77242729-bbs.venus/cache/-1636427911/pub/202011/1605245317221_jpg"
					]
				}, {
					"id": 1452015,
					"user_id": 416790,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 2,
					"reviews": 0,
					"shares": 0,
					"text": "çƒ¦äººçƒ¦äººçƒ¦äºº",
					"images": "https://image.aishencn.com/2020/11/13/181943382_77242729-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53758847,
					"latitude": "27.280350",
					"longitude": "111.744920",
					"createtime": 1605262784,
					"updatetime": 1605263590,
					"deletetime": null,
					"status": "normal",
					"nickname": "å¤šå¤šç›Šå–„",
					"avatar": "https://image.aishencn.com/2020/02/27/183118049_77242729-user.jpg",
					"bio": "",
					"distance": 383670,
					"images_arr": ["https://image.aishencn.com/2020/11/13/181943382_77242729-bbs.jpg"]
				}, {
					"id": 1465247,
					"user_id": 372568,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 2,
					"reviews": 0,
					"shares": 0,
					"text": "æˆ‘åªæ˜¯å˜æˆæˆ‘åŸæ¥çš„æ ·å­äº†\nå˜å®‰é™äº†ã€ä¸çˆ±ç¬‘äº†ã€ä¸è¯´è¯äº†\nå›åˆ°äº†è‡ªå·±æœ€åˆçš„æ ·å­â€¦",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53769377,
					"latitude": "27.254650",
					"longitude": "111.748050",
					"createtime": 1605328818,
					"updatetime": 1605336492,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ˜Ÿæ˜Ÿè‡ªè¿°æ›²",
					"avatar": "https://image.aishencn.com/2020/10/30/053708194_91142779-user.jpg",
					"bio": "",
					"distance": 383737,
					"images_arr": [""]
				}, {
					"id": 1519276,
					"user_id": 372568,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 2,
					"reviews": 0,
					"shares": 0,
					"text": "å¤±æœ›æ”’å¤Ÿäº†â€¦\nçœŸçš„å¥½ç´¯å•Šâ€¦",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53821807,
					"latitude": "27.254480",
					"longitude": "111.748030",
					"createtime": 1605676265,
					"updatetime": 1605687862,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ˜Ÿæ˜Ÿè‡ªè¿°æ›²",
					"avatar": "https://image.aishencn.com/2020/10/30/053708194_91142779-user.jpg",
					"bio": "",
					"distance": 383974,
					"images_arr": [""]
				}, {
					"id": 1593483,
					"user_id": 102623,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "ä½ æ€»æ˜¯åš·åš·ç€è¦æ‰¾ä¸€ä¸ªå¯¹è±¡ å´ä»ä¸ä¸»åŠ¨å‹¾æ­ ä¹Ÿæ‡’å¾—æ¥å—åˆ«äººçš„è¿½æ±‚ å´è¿˜ä¸è‚¯å°†å°± æœ‰æ—¶å€™ä¹Ÿè§‰å¾—å•èº«æŒºå¥½çš„ ä½†åˆå¸¸å¸¸ç¾¡æ…•äººå®¶æˆåŒæˆ  å¯¹ ä½ åˆ°åº•åœ¨ç­‰è°  ä½ åˆ°åº•åœ¨ç­‰è°  ä½ åˆ°åº•åœ¨ç­‰è°å‘€   è¯´å®è¯æˆ‘ä¹Ÿä¸çŸ¥é“  å“ˆå“ˆğŸ˜„",
					"images": "https://image.aishencn.com/2020/11/26/144409753_63398803-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53927300,
					"latitude": "27.277490",
					"longitude": "111.735690",
					"createtime": 1606373050,
					"updatetime": 1606373846,
					"deletetime": null,
					"status": "normal",
					"nickname": "TZ",
					"avatar": "https://image.aishencn.com/2020/04/13/113855467_63398803-user.jpg",
					"bio": "",
					"distance": 384319,
					"images_arr": ["https://image.aishencn.com/2020/11/26/144409753_63398803-bbs.jpg"]
				}, {
					"id": 1606350,
					"user_id": 414136,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 4,
					"reviews": 0,
					"shares": 0,
					"text": "ä¼šæœ‰äººæ— æ¡ä»¶çˆ±ä½ å‘€ï¼ï¼ï¼",
					"images": "https://image.aishencn.com/2020/11/29/003542732_97119487-bbs.venus/cache/1626949412/pub/202011/1606581341695_jpg,https://image.aishencn.com/2020/11/29/003542742_97119487-bbs.venus/cache/1626949412/pub/202011/1606581341852_jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53961588,
					"latitude": "27.245060",
					"longitude": "111.738140",
					"createtime": 1606581345,
					"updatetime": 1606585328,
					"deletetime": null,
					"status": "normal",
					"nickname": "æ•£äº†.",
					"avatar": "https://image.aishencn.com/2020/11/07/095716548_97119487-user.jpg",
					"bio": "",
					"distance": 384637,
					"images_arr": [
						"https://image.aishencn.com/2020/11/29/003542732_97119487-bbs.venus/cache/1626949412/pub/202011/1606581341695_jpg",
						"https://image.aishencn.com/2020/11/29/003542742_97119487-bbs.venus/cache/1626949412/pub/202011/1606581341852_jpg"
					]
				}, {
					"id": 1616164,
					"user_id": 465384,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "æˆ‘ä¸æ˜¯é«˜å¯Œå¸…",
					"images": "",
					"weigh": 0,
					"collect": 1,
					"third_id": 53985205,
					"latitude": "27.283670",
					"longitude": "111.804910",
					"createtime": 1606739639,
					"updatetime": 1606748230,
					"deletetime": null,
					"status": "normal",
					"nickname": "é»„æ—è²",
					"avatar": "https://image.aishencn.com/2020/11/30/191536374_98323012-user.jpg",
					"bio": "",
					"distance": 384998,
					"images_arr": [""]
				}, {
					"id": 1617808,
					"user_id": 465744,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "æˆ‘å¯å¤ªå¼€å¿ƒäº†",
					"images": "https://image.aishencn.com/2020/12/01/050415050_82968316-bbs.jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 53990603,
					"latitude": "27.268040",
					"longitude": "111.736180",
					"createtime": 1606770254,
					"updatetime": 1606775410,
					"deletetime": null,
					"status": "normal",
					"nickname": "é’å”âœ¨",
					"avatar": "https://image.aishencn.com/2020/12/01/050631582_82968316-user.jpg",
					"bio": "",
					"distance": 409053,
					"images_arr": ["https://image.aishencn.com/2020/12/01/050415050_82968316-bbs.jpg"]
				}, {
					"id": 1627554,
					"user_id": 467952,
					"age": 0,
					"gender": 0,
					"zodiac": 0,
					"flag": "",
					"secret": "",
					"place": "é‚µé˜³",
					"views": 0,
					"likes": 1,
					"reviews": 0,
					"shares": 0,
					"text": "æœ‰å¦¹å¦¹è¦è¹­æ ‡å˜›",
					"images": "https://image.aishencn.com/2020/12/03/033558026_96173065-bbs.venus/cache/1539359135/pub/202012/1606937757745_jpg,https://image.aishencn.com/2020/12/03/033558036_96173065-bbs.venus/cache/1539359135/pub/202012/1606937757897_jpg",
					"weigh": 0,
					"collect": 1,
					"third_id": 54013959,
					"latitude": "27.253990",
					"longitude": "111.743780",
					"createtime": 1606937757,
					"updatetime": 1606949827,
					"deletetime": null,
					"status": "normal",
					"nickname": "å¢¨",
					"avatar": "https://image.aishencn.com/2020/12/03/032752066_96173065-user.venus/cache/ext/crop/1606969329088_jpg",
					"bio": "",
					"distance": 441287,
					"images_arr": [
						"https://image.aishencn.com/2020/12/03/033558026_96173065-bbs.venus/cache/1539359135/pub/202012/1606937757745_jpg",
						"https://image.aishencn.com/2020/12/03/033558036_96173065-bbs.venus/cache/1539359135/pub/202012/1606937757897_jpg"
					]
				}],
				load: true
			};
		},
		onLoad() {
			// åˆ›å»ºåœ°å›¾ä¸Šä¸‹æ–‡
			map = uni.createMapContext('map', this);

			uni.getSystemInfo({
				success: res => {
					this.height = res.windowHeight + 'px';
					this.width = res.windowWidth + 'px';
				}
			});

			this.location();



			// var arr = [];
			// for (var i = 0; i < this.list.length; i++) {
			// 	arr.push({
			// 		id: i + 1000,
			// 		latitude: this.list[i].latitude,
			// 		longitude: this.list[i].longitude,
			// 		iconPath: this.list[i].avatar,
			// 		width: 30,
			// 		height: 30
			// 	});
			// }

			// this.covers = arr;
		},

		methods: {

			test() {
				map.getRegion({
					success: res => {
						map.getScale({
							success: ress => {

								this.covers = this.getFortMatMarkerList(res.northeast, res.southwest, ress.scale, this.list)
							}
						})
						// "northeast": {
						// 	"longitude": 111.7890356728411,
						// 	"latitude": 27.34148740552791
						// },
						// "southwest": {
						// 	"longitude": 111.70248749493365,
						// 	"latitude": 27.17478887207441
						// },
					}
				})
			},
			//æ ¹æ®ä¸œåŒ— è¥¿å—ç»çº¬åº¦ ä»¥åŠåå°è¿”å›æ ‡è®°ç‚¹ æ ¼å¼åŒ–æˆå°ç¨‹åºmarkerç‚¹
			getFortMatMarkerList(northeast, southwest, scale, backendMarkerList) {
				//å±å¹•ä¸­æ˜¾ç¤ºçš„ç»åº¦çš„é•¿åº¦å’Œçº¬åº¦çš„é•¿åº¦
				let mapWidth = southwest.longitude - northeast.longitude;
				let mapHeight = northeast.latitude - southwest.latitude;
				//å°†å±å¹•ä¸­åœ°å›¾åˆ†å‰²çš„æ¨ªå‘ æ ¼å­æ•°å’Œ çºµå‘æ ¼å­æ•°
				let widthSize = scale;
				let heightSize = widthSize + parseInt(scale / 2);
				//è®¡ç®—æ¯ä¸ªæ ¼å­çš„ç»çº¬åº¦çš„é•¿åº¦
				let unitWidth = mapWidth / widthSize ;
				let unitHeight = mapHeight / heightSize ;
				console.log(widthSize,heightSize)
				console.log(unitWidth,unitHeight)
				let pointData = {};
				backendMarkerList.forEach(latLng => {
					//å¦‚æœç‚¹åœ¨æ˜¾ç¤ºèŒƒå›´å†…
					if (latLng.latitude < northeast.latitude && latLng.latitude > southwest.latitude &&
						latLng.longitude < northeast.longitude && latLng.longitude > southwest.longitude) {
						let relativeX = latLng.longitude - northeast.longitude;
						let relativeY = latLng.latitude - southwest.latitude;
						//è®¡ç®—å‡ºè¿™ä¸ªç‚¹ï¼Œå¤„äºå“ªä¸ªæ ¼å­
						let x = parseInt(Math.floor(relativeX / unitWidth));
						let y = parseInt(Math.floor(relativeY / unitHeight));
						if (x < 0 || y < 0) {
							console.log('ç‚¹ä½ä¸åœ¨æ ¼å­å†…', 'å¤±è´¥');
						}
						//ç”Ÿæˆå•å…ƒæ ¼ç‚¹ä½æ•°æ®
						let pointKey = x + ',' + y;
						if (pointData[pointKey] == undefined) {
							pointData[pointKey] = [];
						}
							pointData[pointKey].push(latLng);
					}
				});
				console.log('pointData', pointData.length);

				let resultMapArray = [];
				for (let y = 0; y < heightSize; y++) {
					for (let x = 0; x < widthSize; x++) {
						let pointKey = x + ',' + y;
						//ç­›é€‰æ²¡æœ‰å……ç”µç«™ç‚¹ä½çš„æ ¼å­
						if (pointData[pointKey] != undefined) {
							let markerItem = {};
							//èšåˆç‚¹ä¸å•ç‚¹å…±å­˜ , é•¿åº¦ç­‰äºä¸€ ä¸èšåˆç‚¹
							if (pointData[pointKey].length == 1) {
								// console.log('ä¸èšåˆç‚¹', pointData[pointKey][0]);

								markerItem = {
									id: pointData[pointKey][0].id,
									
									latitude: pointData[pointKey][0].latitude,
									longitude: pointData[pointKey][0].longitude,
									iconPath: pointData[pointKey][0].avatar,
									width: 30,
									height: 30
								}

								// let iconPath = pointData[pointKey][0].ScanAndCharge == 1 ? '/img/scanMarkerIcon.png' : '/img/markerIcon.png';
								// markerItem = new zjMarker(pointData[pointKey][0].longitude, pointData[pointKey][0].latitude, pointData[pointKey][0].StationID, {
								//   iconPath: iconPath
								// })
								//é•¿åº¦å¤§äºä¸€ èšåˆç‚¹
							} else if (pointData[pointKey].length > 1) {
								// console.log('èšåˆç‚¹');
								markerItem = {
									id: pointData[pointKey][0].id,
									
									latitude: pointData[pointKey][0].latitude,
									longitude: pointData[pointKey][0].longitude,
									iconPath: '/static/logo.png',
									width: 30,
									height: 30
								}
							}
							resultMapArray.push(markerItem);
						}
					}
				}
				console.log('resultMapArray', resultMapArray.length);
				return resultMapArray;
			},
			updated() {
				console.log('æ¸²æŸ“å®Œæˆ');
			},
			// å½“è§†é‡å‘ç”Ÿæ”¹å˜
			regionchange() {
				console.log('å½“è§†é‡å‘ç”Ÿæ”¹å˜');
				this.test();
				// let loadDelay = 200;
				// if (this.load) {
				//     console.log('ç­‰å¾…åŠ è½½');
				// } else {
				//     this.load = true;
				//     setTimeout(() => {
				//         this.getList();
				//     }, loadDelay);
				// }
			},
			//å®šä½å½“å‰
			location() {
				console.log('å¼€å§‹è·å–åœ°å€');
				uni.getLocation({
					type: 'gcj02',
					success: res => {
						// console.log('åœ°å€è·å–æˆåŠŸ,åˆ‡æ¢åˆ°ç›®æ ‡ç‚¹nvue', res);
						map.moveToLocation({
							latitude: res.latitude,
							longitude: res.longitude
						})
						// this.getList(res.latitude,res.longitude);
					},
					fail: () => {
						console.log('åœ°ç†ä½ç½®è·å–å¤±è´¥');
					}
				});
			},
			testlist(){
				this.getList();
			},
			getList(la = 0, lo = 0) {
				var arr = [];
				map.getCenterLocation({
					success: res => {
						let latitude = res.latitude
						let longitude = res.longitude
						if (la !== 0) {
							latitude = la
							longitude = lo
						}
						console.log('å½“å‰ä¸­å¿ƒåæ ‡', latitude + ',' + longitude);
						uni.request({
							data: {
								latitude: latitude,
								longitude: longitude
							},
							method: 'POST',
							url: 'https://api.mymoyi.cn/api/moyicosmic/test/testList',
							success: res => {
								console.log('å®Œæˆè¯·æ±‚', res);

								if (res.data.code) {
									res = res.data.data;
									for (var i = 0; i < res.list.length; i++) {
										this.list = res.list;
										// arr.push({
										// 	id: i,
										// 	callout: {
										// 		content: res.list[i].text.substr(0, 10),
										// 		color: '#000',
										// 		textAlign: 'center',
										// 		padding: 5
										// 	},
										// 	latitude: res.list[i].latitude,
										// 	longitude: res.list[i].longitude,
										// 	iconPath: res.list[i].avatar,
										// 	width: 30,
										// 	height: 30
										// });
									}
								} else {
									uni.showToast({
										title: res.data.msg,
										icon: 'none'
									});
								}
								// this.covers = arr;
								console.log('arr', arr)
							},
							complete: () => {
								this.load = false;
							}
						});
					}
				});

			},
			de(i) {
				console.log('i', i);
				let a = this.list[i.detail.markerId];
				uni.showModal({
					title: 'ç”¨æˆ·ï¼š' + a.nickname,
					content: a.text
				});
			}
		}
	};
</script>

<style></style>
